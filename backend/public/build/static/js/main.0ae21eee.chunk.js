(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{101:function(e,t){e.exports={youtube:"AIzaSyB1msCdExGF2q9oyAjUq4bmSQq6i89VId8"}},102:function(e,t,n){"use strict";t.a="123456"},109:function(e,t,n){"use strict";var r=n(8),a=n.n(r),o=n(16),c=n(21),i=n.n(c);function u(e){var t={};if(1==e.nodeType){if(e.attributes.length>0){t.attributes={};for(var n=0;n<e.attributes.length;n++){var r=e.attributes.item(n);t.attributes[r.nodeName]=r.nodeValue}}}else 3==e.nodeType&&(t=e.nodeValue);var a=[].slice.call(e.childNodes).filter(function(e){return 3===e.nodeType});if(e.hasChildNodes()&&e.childNodes.length===a.length)t=[].slice.call(e.childNodes).reduce(function(e,t){return e+t.nodeValue},"");else if(e.hasChildNodes())for(var o=0;o<e.childNodes.length;o++){var c=e.childNodes.item(o),i=c.nodeName;if("undefined"==typeof t[i])t[i]=u(c);else{if("undefined"==typeof t[i].push){var l=t[i];t[i]=[],t[i].push(l)}t[i].push(u(c))}}return t}var l=n(101),s=n.n(l);function p(e){return d.apply(this,arguments)}function d(){return(d=Object(o.a)(a.a.mark(function e(t){var n,r;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(i.a.getSuggestionFake(t)).then(function(e){return e.text()});case 2:return n=e.sent,r=u((new DOMParser).parseFromString(n,"text/xml")),e.abrupt("return",r.toplevel?r.toplevel.CompleteSuggestion:[]);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function f(e){return h.apply(this,arguments)}function h(){return(h=Object(o.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch(i.a.searchYoutubeFake(s.a.youtube,t)).then(function(e){return e.json()}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}n.d(t,"b",function(){return p}),n.d(t,"a",function(){return f})},119:function(e,t,n){},123:function(e,t,n){e.exports=n(160)},128:function(e,t,n){},131:function(e,t,n){},132:function(e,t,n){},160:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(10),c=n.n(o),i=(n(128),n(8)),u=n.n(i),l=n(16),s=n(40),p=n(28),d=(n(131),n(132),n(190)),f=function(){return a.a.createElement("div",{className:"Preloader",style:{width:"10rem",height:"10rem",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},a.a.createElement(d.a,null))};f.defaultProps={};var h=f,m=Object(r.lazy)(function(){return n.e(12).then(n.bind(null,266))}),b=function(e){return a.a.createElement(r.Suspense,{fallback:a.a.createElement(h,null)},a.a.createElement(m,e))},g=n(58),v=n(14),y=Object(r.lazy)(function(){return n.e(9).then(n.bind(null,262))}),E=function(e){return a.a.createElement(r.Suspense,{fallback:null},a.a.createElement(y,e))},w=Object(r.lazy)(function(){return n.e(7).then(n.bind(null,267))}),x=function(e){return a.a.createElement(r.Suspense,{fallback:a.a.createElement(h,null)},a.a.createElement(w,e))},F=Object(r.lazy)(function(){return Promise.all([n.e(0),n.e(4),n.e(8)]).then(n.bind(null,263))}),O=function(e){return a.a.createElement(r.Suspense,{fallback:a.a.createElement(h,null)},a.a.createElement(F,e))},k=n(114),S=n(104),j=Object(r.lazy)(function(){return n.e(10).then(n.bind(null,268))}),T=function(e){return a.a.createElement(r.Suspense,{fallback:a.a.createElement(h,null)},a.a.createElement(j,e))},C=Object(r.lazy)(function(){return n.e(15).then(n.bind(null,259))}),I=function(e){return a.a.createElement(r.Suspense,{fallback:a.a.createElement(h,null)},a.a.createElement(C,e))},N=Object(r.lazy)(function(){return Promise.all([n.e(6),n.e(13)]).then(n.bind(null,260))}),A=function(e){return a.a.createElement(r.Suspense,{fallback:a.a.createElement(h,null)},a.a.createElement(N,e))},R=n(63),P=n(78),q=n(38),_=Object(r.lazy)(function(){return Promise.all([n.e(0),n.e(14)]).then(n.bind(null,269))}),z=function(e){return a.a.createElement(r.Suspense,{fallback:a.a.createElement(h,null)},a.a.createElement(_,e))},D=(n(119),n(193)),M=n(194),U=n(195),B=n(196),H=n(197),L=n(198),G=n(203),J=n(109),K=n(204),V=n(191),X=n(192),W=n(88),Y=n.n(W),Q=n(205),$=n(90),Z=Y()(function(e){return{root:{marginTop:"1rem",padding:"2px 4px",display:"flex",alignItems:"center",width:"100%"},input:{marginLeft:e.spacing(1),flex:1},iconButton:{padding:10},divider:{height:28,margin:4}}}),ee=function(e){var t=Object(v.f)(),n=a.a.useState(!0),o=Object(p.a)(n,2),c=o[0],i=o[1],u=a.a.useState([]),l=Object(p.a)(u,2),s=(l[0],l[1],a.a.useState(a.a.createElement(a.a.Fragment,null))),d=Object(p.a)(s,2),f=d[0],h=d[1],m=Z();return Object(r.useEffect)(function(){if(!e.query)return t.push("/search");Object(J.a)(e.query).then(function(t){t&&h(function(){return t.items.map(function(n,r){if(n)return a.a.createElement(K.a,{button:!0,key:r,onClick:function(){return a=n,o={list:t,index:r},void Object($.d)(a.id.videoId).then(function(t){t&&setTimeout(function(){e.appState({uri:t,thumbnail:a.snippet.thumbnails.high.url,video:a,list:o.list,index:o.index})},100)});var a,o}},a.a.createElement(V.a,null,a.a.createElement(Q.a,{alt:n.snippet.title,src:n.snippet.thumbnails.default.url})),a.a.createElement(X.a,{primary:"".concat(decodeURIComponent(n.snippet.title)),secondary:"".concat(n.snippet.channelTitle)}))})})})},[]),a.a.createElement("div",{className:"SearchResultComponent"},a.a.createElement(D.a,{fullScreen:!0,open:c,onClose:function(){}},a.a.createElement(M.a,{className:"fixed-top"},a.a.createElement(U.a,{component:g.b,to:"/search"},window.history?a.a.createElement(B.a,{onClick:function(){i(!1)},component:g.b,to:"/Home",color:"primary.light",visibility:!1},a.a.createElement(H.a,null)):a.a.createElement(a.a.Fragment,null),a.a.createElement(G.a,{autoCapitalize:!0,autoComplete:!0,value:e.query,className:"".concat(m.input," text-light"),placeholder:"Search Kabeers Music",inputProps:{"aria-label":"Search Kabeers Music"}}),a.a.createElement(L.a,{visibility:!1}))),a.a.createElement("div",{className:"container px-3",style:{marginTop:"4rem"}},a.a.createElement("div",{className:"row"},f))))};ee.defaultProps={};var te=Object(R.b)(function(e){return{query:e.q}})(ee),ne=Object(r.lazy)(function(){return n.e(5).then(n.bind(null,271))}),re=function(e){return a.a.createElement(r.Suspense,{fallback:a.a.createElement(d.a,null)},a.a.createElement(ne,e))},ae=n(93),oe=n(202),ce=n(30);var ie=function(){var e=new Audio(""),t=a.a.useState(!1),n=Object(p.a)(t,2),o=n[0],c=(n[1],a.a.useState(!0)),i=Object(p.a)(c,2),d=i[0],f=i[1],h={primary:{contrastText:o?"#757575":"#FFFFFF",main:"#E14A58",light:o?"#757575":"#FFFFFF",dark:o?"#303030":"#FFFFFF",miniPlayer:{main:o?"#303030":"#FEFEFE",borderTop:o?"#E14A58":"#3C3F41",text:o?"#FFFFFF":"#2B2B2B"},player:{slider:{rail:"#FFF",thumb:"#FFF",thumbColorPrimary:"#FFF"},invertButtons:{main:"#E14A58",invert:"#FFFFFF"}}},secondary:{main:"#E14A58",light:o?"#757575":"#FFFFFF",dark:o?"#303030":"#FFFFFF"},background:{}},m=Object(k.a)({palette:Object(s.a)({type:"dark"},h,{slider:{trackColor:"yellow",selectionColor:"red"}})});function y(e){return w.apply(this,arguments)}function w(){return(w=Object(l.a)(u.a.mark(function t(n){return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:try{e.pause(),e.src="",n.list&&n.index&&n.thumbnail&&n.video&&n.uri?n.hidden=!1:n.hidden=!0,e.src=n.uri,console.log(n.uri),P.a.dispatch(Object(q.e)(e,n.video,{Dialog:!0,MiniPlayer:!1},function(){},{list:n.list,index:n.index})),f(!0),f(!1)}catch(r){console.log(r)}case 1:case"end":return t.stop()}},t)}))).apply(this,arguments)}return Object(r.useEffect)(function(){Object(ce.a)().then(function(e){return console.log(e)})},[]),a.a.createElement(R.a,{store:P.a},a.a.createElement(S.a,{theme:m},a.a.createElement(g.a,null,a.a.createElement(ae.a,{maxSnack:1},a.a.createElement(oe.a,null),a.a.createElement("div",{className:"App"},a.a.createElement(A,null,a.a.createElement("audio",{id:"MainAudio",src:"",preload:"auto"}),a.a.createElement(T,null),a.a.createElement(O,{hidden:d,changes:y}),a.a.createElement(v.b,{exact:!0,path:"/Home",render:function(){return a.a.createElement(b,{appState:y})}}),a.a.createElement(v.b,{exact:!0,path:"/downloads",render:function(){return a.a.createElement(x,{appState:y})}}),a.a.createElement(v.b,{exact:!0,path:"/search",component:I}),a.a.createElement(v.b,{exact:!0,path:"/history",component:re}),a.a.createElement(v.b,{exact:!0,path:"*",render:function(){return a.a.createElement(v.a,{to:"/Home"})}}),a.a.createElement(v.b,{exact:!0,path:"/search/results",render:function(){return a.a.createElement(te,{appState:y})}}),a.a.createElement(E,null),a.a.createElement(z,{hidden:d})))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()}).catch(function(e){console.error(e.message)}),console.log=function(){},c.a.render(a.a.createElement(a.a.Fragment,null,a.a.createElement(ie,null)),document.getElementById("root"))},21:function(e,t){var n="".concat(window.location.protocol,"//").concat(window.location.hostname,":9000"),r={mostPopular:function(e){return"https://www.googleapis.com/youtube/v3/videos?part=snippet&videoCategoryId=10&type=video&key=".concat(e,"&chart=mostPopular")},mostPopularFake:function(e){return"".concat(n,"/files/yt-fake/sample-response-master/yt-api/yt.json")},getProxyfiedURI:function(e){return"".concat(n,"/api/song?id=").concat(e)},getSuggestion:function(e){return"https://suggestqueries.google.com/complete/search?"},getSuggestionFake:function(e){return"https://cors-anywhere.herokuapp.com/http://clients1.google.com/complete/search?hl=en&output=toolbar&q=".concat(e)},searchYoutube:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:15;return"https://www.googleapis.com/youtube/v3/search?part=snippet&videoCategoryId=10&type=video&key=".concat(e,"&q=").concat(t,"&maxResults=").concat(n)},searchYoutubeFake:function(e,t){return"".concat(n,"/files/yt-fake/sample-response-master/yt-api/search-result.json")},proxyURI:function(e){return"".concat(n,"/proxy/").concat(e)},saveWatchHistory:"".concat(n,"/api/history/save"),saveSearchHistory:"".concat(n,"/api/search/save"),getFeed:"".concat(n,"/api/feed"),getFeedFake:function(){return"".concat(n,"/files/yt-fake/sample-response-master/yt-api/suggested-cardib.json")},authRedirect:"".concat(n,"/auth/redirect"),refreshToken:"".concat(n,"/auth/store/tokens/refresh")};e.exports=r},30:function(e,t,n){"use strict";n.d(t,"a",function(){return l});var r=n(8),a=n.n(r),o=n(16),c=n(21),i=n.n(c),u={getCookie:function(e){for(var t=e+"=",n=decodeURIComponent(document.cookie).split(";"),r=0;r<n.length;r++){for(var a=n[r];" "===a.charAt(0);)a=a.substring(1);if(0===a.indexOf(t))return a.substring(t.length,a.length)}return""},setCookie:function(e,t,n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3);var a="expires="+r.toUTCString();document.cookie=e+"="+t+";"+a+";path=/"}};function l(){return s.apply(this,arguments)}function s(){return(s=Object(o.a)(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.getCookie("token")){e.next=3;break}return e.abrupt("return",window.location.href=i.a.authRedirect);case 3:if(t=JSON.parse(t),!(Math.floor((Date.now()-t.exp)/1e3/60)>30)){e.next=8;break}return e.next=7,fetch(i.a.refreshToken).then(function(e){return e.ok?e.json():null});case 7:return e.abrupt("return",e.sent);case 8:return e.abrupt("return",t.token);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}},38:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o}),n.d(t,"d",function(){return c}),n.d(t,"c",function(){return i}),n.d(t,"f",function(){return u}),n.d(t,"e",function(){return l}),n.d(t,"g",function(){return s});var r=n(40),a="CHANGE_DRAWER",o="CURRENT_SONG",c="SEARCH_QUERY_PARAM",i="HOME_COMPONENT_STATE";function u(e){return{type:a,drawer:e}}function l(e,t,n,a,c){return{type:o,currentSong:{audioElement:e,videoElement:t,componentState:n,reOpenDialog:a,playList:Object(r.a)({},c)}}}function s(e){return{type:c,q:e}}},78:function(e,t,n){"use strict";var r=n(49),a=n(40),o=n(38),c={currentSong:{audioElement:new Audio(""),videoElement:{},playList:{index:0,list:[]},reOpenDialog:function(){}},drawer:!1,q:""};var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.a:return{currentSong:e.currentSong,drawer:t.drawer};case o.b:return{currentSong:t.currentSong,drawer:e.drawer};case o.d:return Object(a.a)({},e,{q:t.q});case o.c:return Object(a.a)({},e,{home:t.home});default:return e}},u=n(111),l=n(112),s=n(113),p=function(){function e(){Object(l.a)(this,e)}return Object(s.a)(e,[{key:"loadState",value:function(){try{var e=localStorage.getItem("KabeersMusic:state");return null===e?this.initializeState():JSON.parse(e)}catch(t){return this.initializeState()}}},{key:"saveState",value:function(e){try{var t=JSON.stringify(e);localStorage.setItem("KabeersMusic:state",t)}catch(n){}}},{key:"initializeState",value:function(){return{currentSong:{audioElement:new Audio(""),videoElement:{},playList:{index:0,list:[]},reOpenDialog:function(){}},drawer:!1,q:""}}}]),e}(),d={currentSong:{audioElement:new Audio(""),videoElement:{},playList:{index:0,list:[]},reOpenDialog:function(){}},drawer:!1,q:""},f=(new p,[u.a]),h=Object(r.d)(i,d,Object(r.c)(r.a.apply(void 0,f),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}));t.a=h},90:function(e,t,n){"use strict";var r=n(8),a=n.n(r),o=n(28),c=n(16),i=n(6),u=(n(137),n(21)),l=n.n(u),s=n(30);function p(e){var t=e;return new Promise(function(e,n){return Object(s.a)().then(function(r){var a=new XMLHttpRequest;a.open("GET",l.a.proxyURI(t)),a.responseType="blob",a.setRequestHeader("Authorization","Bearer ".concat(r)),a.onload=function(){var t=a.status;t>=200&&t<300?e(a.response):n({status:t,statusText:a.statusText})},a.send(),setTimeout(function(){a.abort(),a.open("GET",l.a.proxyURI(t)),a.send()},1e3)})})}n(102);n.d(t,"a",function(){return m}),n.d(t,"d",function(){return g}),n.d(t,"e",function(){return y}),n.d(t,"b",function(){return w}),n.d(t,"f",function(){return F}),n.d(t,"g",function(){return k}),n.d(t,"c",function(){return j});function d(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(Date.now()/1e3).toString(16).split(".").join("");n.length<14;)n+="0";var r="";return t&&(r=".",r+=Math.round(1e8*Math.random())),e+n+r}var f=new i.a("KabeersMusic_Songs");f.version(10).stores({songs:"id, &videoId, valid, time, rating, blob, state, thumbnail"});var h=new i.a("KabeersMusic_History");function m(){return b.apply(this,arguments)}function b(){return(b=Object(c.a)(a.a.mark(function e(){var t,n,r,c,i,u,s,d=arguments;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{videoId:null,rating:0,title:"",channelTitle:"",tags:""},e.prev=1,console.log("Download Started"),n="https://i.ytimg.com/vi/".concat(t.videoId,"/hqdefault.jpg"),e.next=6,fetch(l.a.getProxyfiedURI(t.videoId)).then(function(e){return e.json()});case 6:return r=e.sent,e.next=9,Promise.all([p(n),p(r)]);case 9:return c=e.sent,i=Object(o.a)(c,2),u=i[0],s=i[1],f.songs.put({id:t.videoId,state:"downloaded",thumbnail:u,blob:s,valid:!0,time:Date.now(),videoId:t.videoId,rating:t.rating,tags:t.tags||[],title:t.title,channelTitle:t.channelTitle,videoElement:t.videoElement}).then(function(e){console.log(e)}),e.abrupt("return",!0);case 17:return e.prev=17,e.t0=e.catch(1),e.abrupt("return",e.t0);case 20:case"end":return e.stop()}},e,null,[[1,17]])}))).apply(this,arguments)}function g(e){return v.apply(this,arguments)}function v(){return(v=Object(c.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(s.a)().then(function(e){return fetch(l.a.getProxyfiedURI(t),{headers:new Headers({Authorization:"Bearer ".concat(e)})}).then(function(e){return e.ok?e.json():null})}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function y(e){return E.apply(this,arguments)}function E(){return(E=Object(c.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.songs.toArray();case 2:if(!(n=e.sent).some(function(e){return e.id===t})){e.next=7;break}return e.abrupt("return",n.find(function(e){return e.videoId===t}));case 7:return e.abrupt("return",Object(s.a)().then(function(e){fetch(l.a.getProxyfiedURI(t),{headers:{Authorization:"Bearer ".concat(e)}}).then(function(e){return e.ok?e.json():null})}));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function w(){return x.apply(this,arguments)}function x(){return(x=Object(c.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",f.songs.toArray());case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function F(e){return O.apply(this,arguments)}function O(){return(O=Object(c.a)(a.a.mark(function e(t){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.songs.toArray();case 2:return n=e.sent,e.abrupt("return",n&&n.some(function(e){return e.id===t}));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function k(e){return S.apply(this,arguments)}function S(){return(S=Object(c.a)(a.a.mark(function e(t){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:h.songs.put({id:d()+d(),title:t.title,channelTitle:t.ChannelTitle,tags:t.tags,thumbnail:t.thumbnail,time:Date.now(),rating:t.rating}).then(function(e){console.log(e)});case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function j(){return T.apply(this,arguments)}function T(){return(T=Object(c.a)(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",h.songs.toArray());case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}h.version(10).stores({songs:"id, time, rating, thumbnail, channelTitle, title, tags"}),Object(s.a)().then(function(e){var t=new Headers;t.append("Authorization","Bearer ".concat(e)),t.append("Content-Type","application/x-www-form-urlencoded");new URLSearchParams;fetch("http://localhost:9000/api/test",{method:"GET",headers:t,redirect:"follow"}).then(function(e){return e.text()}).then(function(e){return console.log(e)}).catch(function(e){return console.log("error",e)})}),console.log("%20 SongJS Loaded")}},[[123,2,3]]]);
//# sourceMappingURL=main.0ae21eee.chunk.js.map
